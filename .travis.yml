language: c

addons:
  apt:
    packages:
    - gfortran
    - g++-5
    - gcc-5
    - clang-3.6

sudo: required
dist: trusty


os:
    - linux

compiler:
  - g++
  - clang



env:
    global:
        # Set defaults to avoid repeating in most cases
        - CONDA_DEPENDENCIES='scipy matplotlib sympy'
        - PIP_DEPENDENCIES=''

    matrix:
        - PYTHON_VERSION=2.7

matrix:

    # Don't wait for allowed failures
    fast_finish: true

    include:

        # Try MacOS X
        # - os: osx
        #   env: SETUP_CMD='test'
        #        CONDA_DEPENDENCIES=$CONDA_ALL_DEPENDENCIES


        # Try with various versions of numpy/astropy
        - os: linux
          env: PYTHON_VERSION=2.7 NUMPY_VERSION=1.10 ASTROPY_VERSION=1.0'
        # - os: linux
        #   env: PYTHON_VERSION=2.7 NUMPY_VERSION=stable ASTROPY_VERSION=stable'


    allow_failures:
      - env: NUMPY_VERSION=dev


# before_install:
#     - sudo apt-get install g++-5

install:
    - git clone git://github.com/astropy/ci-helpers.git
    - source ci-helpers/travis/setup_conda.sh
    - python setup.py build
    - python setup.py install --user


script:
    - cd tests
    - nosetests
